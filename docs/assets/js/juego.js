console.clear();let deck=[];const figuras=["A","J","Q","K"],cartas=["C","D","H","S"];let puntosJugador=0,puntosComputadora=0;const btnPedir=document.querySelector("#btnPedir"),btnDetener=document.querySelector("#btnDetener"),btnNuevo=document.querySelector("#btnNuevo"),divJugadorCartas=document.querySelector("#jugador-cartas"),divComputadoraCartas=document.querySelector("#computadora-cartas"),divMarcador=document.querySelector("#marcador"),puntosHTML=document.querySelectorAll("small"),crearDecK=()=>{deck=[];for(let a=2;a<=10;a++)for(let b of cartas)deck.push(a+b);for(let c of cartas)for(let d of figuras)deck.push(d+c);return deck=_.shuffle(deck),console.log("crearDecK - shuffle",deck,deck.length),deck};crearDecK(deck);const pedirCarta=()=>{if(0===deck.length)throw"No hay cartas";return deck.pop()};console.log("documento",deck);const valorCarta=a=>{let b=a.substring(0,a.length-1),c=0;return c=isNaN(b)?"A"===b?11:10:1*b,console.log("valorCarta",a,c),c},turnoComputadora=a=>{do{let c=pedirCarta(),b=document.createElement("img");if(b.src=`./assets/cartas/${c}.png`,b.classList.add("carta"),divComputadoraCartas.append(b),puntosComputadora+=valorCarta(c),puntosHTML[1].innerText=puntosComputadora,a>21)break}while(puntosComputadora<a&&a<=21)btnDetener.disabled=!0,pintarResultado()},pintarResultado=()=>{let a="";a=puntosJugador<=21&&puntosJugador>puntosComputadora?"Gana Jugador: ":puntosComputadora<=21?"Gana Computadora: ":"Gana Jugador: ",a+=puntosJugador+"-"+puntosComputadora;let b=document.createElement("h1");b.innerText=a,divMarcador.append(b)};btnPedir.addEventListener("click",()=>{let b=pedirCarta(),a=document.createElement("img");a.src=`./assets/cartas/${b}.png`,a.classList.add("carta"),divJugadorCartas.append(a),puntosJugador+=valorCarta(b),puntosHTML[0].innerText=puntosJugador,puntosJugador>=21&&(btnPedir.disabled=!0,btnDetener.disabled=!0,turnoComputadora(puntosJugador))}),btnDetener.addEventListener("click",()=>{turnoComputadora(puntosJugador),btnPedir.disabled=!0}),btnNuevo.addEventListener("click",()=>{console.clear(),deck=crearDecK(),puntosJugador=0,puntosComputadora=0,puntosHTML[0].innerText=0,puntosHTML[1].innerText=0,btnPedir.disabled=!1,btnDetener.disabled=!1,divComputadoraCartas.innerHTML="",divJugadorCartas.innerHTML="",divMarcador.innerHTML=""})